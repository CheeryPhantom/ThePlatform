# ThePlatform
<<<<<<< HEAD
An app that acts as a social media job platform
=======

Small job platform API + frontend (local development).

## Project Structure
- `backend/` - Express API server (Node, ES modules)
# ThePlatform

An app that acts as a social media job platform.

Small job platform API + frontend (local development).

## Project Structure
- `backend/` - Express API server (Node, ES modules)
- `frontend/` - Vite + React frontend
- `db/` - SQL schema and seed files used by Docker Postgres
- `docker-compose.yml` - Postgres + Adminer for local development

## What I changed so far
- Fixed a bug in `backend/src/index.js` where an undefined `pool` variable was used — consolidated DB test routes to use the exported `db` Pool.
- Added placeholder routers for API endpoints so routes can be mounted safely:
  - `backend/src/routes/auth.js`
  - `backend/src/routes/users.js`
  - `backend/src/routes/jobs.js`
  - `backend/src/routes/employers.js`
- Added `backend/.gitignore` and a repository-level `.gitignore` to avoid committing secrets and node modules.
- Updated `docker-compose.yml` to map Postgres to host port `5433` to avoid conflict with a local Postgres instance on `5432`.
- Updated `backend/.env` to use `DATABASE_URL=postgresql://theplatform:changeme@localhost:5433/theplatform_dev`.

## How to run (local development)
Prereqs: Docker Desktop, Node 18+ (or compatible), npm

1. Start the database and Adminer (project root):
```
docker-compose up -d
```

2. Backend (in a new terminal):
```
cd backend
npm install
npm run dev
```

3. Frontend (in another terminal):
```
cd frontend
npm install
npm run dev
```

4. Useful endpoints:
- API root: `http://localhost:4000/`
- DB test: `http://localhost:4000/db-test`
- Placeholder routes: `http://localhost:4000/api/auth`, `.../api/users`, `.../api/jobs`, `.../api/employers`
- Adminer UI: `http://localhost:8080/` (login with database `theplatform_dev`, user `theplatform`, password `changeme`, server `host.docker.internal` or `localhost:5433`)

Notes:
- The Postgres container host port was changed to `5433` to avoid conflicts with any local Postgres running on `5432`.
- `backend/.env` contains secrets and is ignored by `.gitignore`. Do not commit it.

## Git: push this repository to a remote
1. Initialize git (if not already):
```
git init
git add .
git commit -m "Initial project import with backend fixes and placeholders"
```

2. Create a remote repository (GitHub) and add remote, then push:
```
# replace <your-remote-url> with the HTTPS or SSH repo URL
git remote add origin <your-remote-url>
git branch -M main
git push -u origin main
```

If you use the GitHub CLI you can run:
```
gh repo create <repo-name> --public --source=. --push
```

## What remains to do (recommended next steps)
- Implement actual route handlers and controllers for auth, users, jobs, and employers.
- Add authentication middleware and JWT integration.
- Add tests for backend routes and database integration (use a test DB or Docker test compose).
- Add CI configuration (GitHub Actions) to run lint and tests on push.
- Consider dockerizing the backend for consistent development and to use Docker networking (then `DATABASE_URL` should use host `db`).

## Troubleshooting
- If you get `password authentication failed for user "theplatform"`:
  - Confirm the backend `DATABASE_URL` points at `localhost:5433` (see `backend/.env`).
  - Run `docker-compose ps` and `docker-compose logs db --tail 200` to inspect database status.
  - Ensure no local Postgres is listening on `5432`, or change the compose port mapping back if you prefer to stop local Postgres.

---
Generated by the project maintainer assistant. Update this README as you continue working.

## Sharing the repo with collaborators

Use the instructions below to help others clone, run, and contribute to this repository.

### Clone & run (quick start)
- Clone the repo:
```powershell
git clone https://github.com/CheeryPhantom/ThePlatform.git
cd ThePlatform
```
- Start DB + Adminer (project root):
```powershell
docker-compose up -d
```
- Backend (new terminal):
```powershell
cd backend
npm install
# create a local .env from .env.example
npm run dev
```
- Frontend (another terminal):
```powershell
cd frontend
npm install
npm run dev
```

### Provide an environment example (`backend/.env.example`)
Add a non-sensitive example env file so collaborators can create their own `backend/.env`.
Example contents:
```
PORT=4000
DATABASE_URL=postgresql://theplatform:changeme@localhost:5433/theplatform_dev
JWT_SECRET=your_jwt_secret_here
```

### Access & collaboration options
- **Public repo:** Anyone can clone and submit PRs.
- **Private repo:** Invite collaborators: Repo → Settings → Manage access → Invite collaborators.
- **Organization/Teams:** Add the repo to a GitHub organization to manage team access.

### Authentication for pushing
- **HTTPS:** Use a Personal Access Token (PAT) with `repo` scope as your password when Git prompts.
- **SSH:** Add an SSH key to your GitHub account and push using the SSH remote.

### Recommended developer workflow
- Use feature branches: `feature/<short-descr>`.
- Open pull requests targeting `main` for code review.
- Protect `main`: require at least one review and status checks, disallow force pushes.
- Add CI (GitHub Actions) to run lint/tests on PRs.

### Files & repo hygiene
- Keep `backend/.env` out of Git and include `backend/.env.example` in the repo.
- Use `.gitignore` to exclude `node_modules`, logs, and editor files.
- Add `CONTRIBUTING.md`, `ISSUE_TEMPLATE.md`, and `PULL_REQUEST_TEMPLATE.md` to help contributors.

### Sharing without GitHub
- Create a zip of the repository (loses git history):
```powershell
git archive --format=zip -o ThePlatform.zip main
```
- Or create a bundle to transfer with history:
```powershell
git bundle create ThePlatform.bundle --all
```

### Quick checklist for collaborators
- Clone repo
- Copy `backend/.env.example` → `backend/.env` and update values if needed
- Run `docker-compose up -d`
- Start backend: `cd backend && npm install && npm run dev`
- Start frontend: `cd frontend && npm install && npm run dev`

If you want, I can add `backend/.env.example`, `CONTRIBUTING.md`, and a basic CI workflow now.
